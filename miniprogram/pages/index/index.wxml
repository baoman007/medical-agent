<view class="container">
  <!-- 主卡片 -->
  <view class="card">
    <view class="title">🏥 智能医疗助手</view>
    <view class="subtitle">描述您的症状，AI 医生为您提供初步诊断建议</view>

    <!-- 快捷症状标签 -->
    <view style="margin-bottom: 30rpx;">
      <text style="font-size: 28rpx; color: #666; margin-bottom: 15rpx; display: block;">常见症状</text>
      <t-cell-group>
        <t-cell title="😵 头痛" hover bindtap="addSymptom" data-symptom="头痛" arrow />
        <t-cell title="🌡️ 发烧" hover bindtap="addSymptom" data-symptom="发烧" arrow />
        <t-cell title="🤧 咳嗽" hover bindtap="addSymptom" data-symptom="咳嗽" arrow />
        <t-cell title="😣 恶心" hover bindtap="addSymptom" data-symptom="恶心" arrow />
        <t-cell title="💔 胸痛" hover bindtap="addSymptom" data-symptom="胸痛" arrow />
        <t-cell title="😮 呼吸困难" hover bindtap="addSymptom" data-symptom="呼吸困难" arrow />
      </t-cell-group>
    </view>

    <!-- 输入框 -->
    <view style="margin-bottom: 30rpx;">
      <text style="font-size: 28rpx; color: #666; margin-bottom: 15rpx; display: block;">描述您的症状</text>
      <t-textarea
        id="symptomInput"
        placeholder="请详细描述您的症状，例如：我最近感觉头痛，持续了两天，还有点发烧..."
        value="{{symptomText}}"
        bindinput="onSymptomInput"
        height="300"
        maxlength="500"
        autosize
      />
    </view>

    <!-- 提交按钮 -->
    <t-button
      theme="primary"
      size="large"
      block
      bindtap="submitConsultation"
      loading="{{loading}}"
      disabled="{{loading}}"
    >
      {{loading ? '分析中...' : '开始问诊'}}
    </t-button>

    <!-- 警告提示 -->
    <view class="warning-box">
      ⚠️ 重要提示：本系统提供的信息仅供参考，不能替代专业医生的诊断和治疗。紧急情况请立即就医或拨打 120。
    </view>
  </view>

  <!-- 结果卡片 -->
  <view class="card" wx:if="{{showResult}}">
    <view class="title" style="display: flex; align-items: center;">
      <t-icon name="check-circle" size="48" color="#00A870" style="margin-right: 10rpx;" />
      诊断结果
    </view>

    <!-- 紧急程度 -->
    <view class="urgency-box urgency-{{urgencyClass}}" wx:if="{{urgencyText}}">
      <text>{{urgencyText}}</text>
    </view>

    <!-- 详细内容 -->
    <t-divider />
    <text style="font-size: 28rpx; color: #333; line-height: 1.8; white-space: pre-wrap;">{{resultContent}}</text>
  </view>

  <!-- 加载状态 -->
  <t-loading
    wx:if="{{loading}}"
    theme="circular"
    size="80rpx"
    style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);"
    text="AI 医生正在分析您的症状..."
  />
</view>
