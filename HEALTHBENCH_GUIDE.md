# HealthBench è¯„ä¼°ä½¿ç”¨æŒ‡å—

## ğŸ“Š HealthBench ç®€ä»‹

HealthBench æ˜¯ OpenAI å¼€æºçš„åŒ»ç–—è¯„ä¼°åŸºå‡†ï¼Œç”¨äºè¯„ä¼°å¤§è¯­è¨€æ¨¡å‹åœ¨çœŸå®åŒ»ç–—åœºæ™¯ä¸­çš„è¡¨ç°ã€‚

- **æ•°æ®é›†è§„æ¨¡**: 5000+ çœŸå®åŒ»ç–—å¯¹è¯
- **è¯„ä¼°ç»´åº¦**: ç—‡çŠ¶åˆ†æã€è¯Šæ–­å‡†ç¡®æ€§ã€å»ºè®®åˆç†æ€§ã€ç´§æ€¥ç¨‹åº¦è¯†åˆ«ç­‰
- **å®˜æ–¹é“¾æ¥**: https://github.com/openai/simple-evals

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¡®ä¿ Ollama æœåŠ¡è¿è¡Œ

```bash
# æ£€æŸ¥ Ollama çŠ¶æ€
ollama list

# å¦‚æœæœåŠ¡æœªè¿è¡Œ
brew services start ollama
```

### 2. è¿è¡Œ HealthBench æµ‹è¯•

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/baozhen/CodeBuddy/medical-agent

# è¿è¡Œæµ‹è¯•ï¼ˆé»˜è®¤ 5 ä¸ªç¤ºä¾‹ï¼‰
python3 healthbench_test.py

# æŒ‡å®šæ¨¡å‹å’Œæµ‹è¯•æ•°é‡
python3 healthbench_test.py --model medical-assistant --examples 10

# ä¿å­˜ç»“æœåˆ°æŒ‡å®šæ–‡ä»¶
python3 healthbench_test.py --model qwen2.5 --examples 5 --output results_qwen.json
```

### 3. å‚æ•°è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--model` | `medical-assistant` | Ollama æ¨¡å‹åç§° |
| `--examples` | `5` | æµ‹è¯•ç”¨ä¾‹æ•°é‡ |
| `--output` | `healthbench_results.json` | ç»“æœä¿å­˜è·¯å¾„ |

## ğŸ“‹ æµ‹è¯•ç”¨ä¾‹

å½“å‰æµ‹è¯•é›†åŒ…å«ä»¥ä¸‹ç±»å‹çš„åŒ»ç–—åœºæ™¯ï¼š

1. **ä¸€èˆ¬ç—‡çŠ¶** - å¤´ç—›ã€æ¶å¿ƒã€ç–²åŠ³ç­‰
2. **å‘çƒ­å’³å—½** - å‘çƒ§ã€å’³å—½ã€æœ‰ç—°
3. **ç´§æ€¥æƒ…å†µ** - èƒ¸ç—›ã€å‘¼å¸å›°éš¾ã€æŠ½æ
4. **æ…¢æ€§ç—‡çŠ¶** - ç–²åŠ³ã€ç¡çœ é—®é¢˜
5. **å„¿ç«¥ç—‡çŠ¶** - å„¿ç«¥å‘çƒ§ã€æŠ½æ

## ğŸ“Š æµ‹è¯•ç»“æœ

### è¯„ä¼°æŒ‡æ ‡

- **æ€»åˆ†**: æ»¡è¶³çš„ rubric æ¡ç›®æ€»åˆ†
- **æœ€é«˜åˆ†**: æ‰€æœ‰ rubric æ¡ç›®æ€»åˆ†
- **ç™¾åˆ†æ¯”**: å¾—åˆ†ç™¾åˆ†æ¯”
- **å“åº”æ—¶é—´**: æ¨¡å‹ç”Ÿæˆå“åº”æ‰€éœ€æ—¶é—´
- **é€šè¿‡ç‡**: å¾—åˆ† â‰¥ 50% çš„æµ‹è¯•ç”¨ä¾‹æ¯”ä¾‹

### ç¤ºä¾‹è¾“å‡º

```
============================================================
ğŸ“Š Final Results
============================================================
Total Score: 8/11
Percentage: 72.7%
Average Response Time: 6.60s
Test Cases Passed: 3/3
```

### JSON ç»“æœæ ¼å¼

```json
{
  "model": "medical-assistant",
  "total_score": 8,
  "total_max": 11,
  "results": [
    {
      "id": 1,
      "question": "æˆ‘æœ€è¿‘æ„Ÿè§‰å¤´ç—›ï¼Œè¿˜æœ‰ç‚¹æ¶å¿ƒï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ",
      "response": "...",
      "rubric_score": 3,
      "rubric_max": 3,
      "percentage": 100.0,
      "response_time": 9.78
    }
  ]
}
```

## ğŸ¯ å®é™…æµ‹è¯•ç»“æœ

### medical-assistant (Qwen2.5 7B)

| æµ‹è¯•ç”¨ä¾‹ | å¾—åˆ† | æœ€é«˜åˆ† | ç™¾åˆ†æ¯” | å“åº”æ—¶é—´ |
|---------|------|--------|--------|---------|
| 1. å¤´ç—›æ¶å¿ƒ | 3/3 | 100.0% | 9.78s |
| 2. å‘çƒ§å’³å—½ | 2/3 | 66.7% | 5.95s |
| 3. èƒ¸ç—›å‘¼å¸å›°éš¾ | 3/5 | 60.0% | 4.08s |
| **æ€»åˆ†** | **8/11** | **72.7%** | **6.60s** |

**æ€»ç»“**: æ¨¡å‹åœ¨ä¸€èˆ¬åŒ»ç–—å»ºè®®æ–¹é¢è¡¨ç°è‰¯å¥½ï¼ˆ100%ï¼‰ï¼Œä½†åœ¨ç´§æ€¥æƒ…å†µçš„å¤æ‚è¯„ä¼°ä¸Šè¿˜æœ‰æå‡ç©ºé—´ï¼ˆ60%ï¼‰ã€‚

## ğŸ”§ é«˜çº§ä½¿ç”¨

### æµ‹è¯•ä¸åŒæ¨¡å‹

```bash
# æµ‹è¯• Qwen2.5 åŸºç¡€æ¨¡å‹
python3 healthbench_test.py --model qwen2.5:latest --examples 5

# æµ‹è¯•å…¶ä»–æ¨¡å‹ï¼ˆéœ€å…ˆä¸‹è½½ï¼‰
ollama pull llama3.2:3b
python3 healthbench_test.py --model llama3.2:3b --examples 5
```

### æ‰¹é‡æµ‹è¯•

```bash
#!/bin/bash

for model in "medical-assistant" "qwen2.5:latest"; do
    echo "Testing model: $model"
    python3 healthbench_test.py --model $model --examples 5 --output "results_${model//\//-}.json"
done
```

### è‡ªå®šä¹‰æµ‹è¯•ç”¨ä¾‹

ç¼–è¾‘ `healthbench_test.py` ä¸­çš„ `load_test_cases` æ–¹æ³•æ·»åŠ è‡ªå®šä¹‰æµ‹è¯•ç”¨ä¾‹ï¼š

```python
test_cases = [
    {
        "id": 1,
        "conversation": [
            {"role": "user", "content": "ä½ çš„é—®é¢˜"}
        ],
        "rubric": [
            {"criteria": "è¯„ä¼°æ ‡å‡†", "points": 1},
        ]
    },
    # æ·»åŠ æ›´å¤šç”¨ä¾‹...
]
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### åŠ é€Ÿå“åº”æ—¶é—´

1. **ä½¿ç”¨æ›´å°çš„æ¨¡å‹**
   ```bash
   ollama pull qwen2.5:3b
   python3 healthbench_test.py --model qwen2.5:3b --examples 5
   ```

2. **è°ƒæ•´æ¸©åº¦å‚æ•°**
   - ä¿®æ”¹è„šæœ¬ä¸­çš„ `temperature` å‚æ•°
   - è¾ƒä½æ¸©åº¦ï¼ˆ0.5-0.7ï¼‰ç”Ÿæˆæ›´å¿«çš„ç¡®å®šæ€§å›ç­”

3. **å¢åŠ å¹¶å‘**
   - å½“å‰è„šæœ¬ä¸ºå•çº¿ç¨‹é¡ºåºæ‰§è¡Œ
   - å¯ä»¥ä¿®æ”¹ä¸ºå¹¶è¡Œæ‰§è¡Œå¤šä¸ªæµ‹è¯•ç”¨ä¾‹

### æå‡å‡†ç¡®æ€§

1. **ä¼˜åŒ–ç³»ç»Ÿæç¤º**
   ```python
   payload["system"] = "ä½ æ˜¯ä¸“ä¸šçš„åŒ»ç–—åŠ©æ‰‹ï¼Œå…·æœ‰ä¸°å¯Œä¸´åºŠç»éªŒ..."
   ```

2. **å¢åŠ ä¸Šä¸‹æ–‡é•¿åº¦**
   ```python
   payload["options"]["num_ctx"] = 4096  # å¢åŠ ä¸Šä¸‹æ–‡çª—å£
   ```

3. **ä½¿ç”¨æ›´å¤§çš„æ¨¡å‹**
   ```bash
   ollama pull qwen2.5:14b
   ```

## ğŸ†š ä¸æ ‡å‡† HealthBench å¯¹æ¯”

### æ ‡å‡† HealthBenchï¼ˆå®˜æ–¹ï¼‰

- âœ… ä½¿ç”¨å®Œæ•´ 5000+ æ•°æ®é›†
- âœ… GPT-4 ä½œä¸ºè¯„ä¼°å™¨
- âœ… æ›´ä¸¥æ ¼çš„ rubric
- âŒ éœ€è¦ä»˜è´¹ API
- âŒ è¯„ä¼°æ—¶é—´é•¿

### ç®€åŒ–ç‰ˆ HealthBenchï¼ˆæœ¬è„šæœ¬ï¼‰

- âœ… å…è´¹ä½¿ç”¨æœ¬åœ°æ¨¡å‹
- âœ… å¿«é€Ÿè¯„ä¼°ï¼ˆå‡ ç§’/ç”¨ä¾‹ï¼‰
- âœ… å®Œå…¨ç¦»çº¿
- âš ï¸ æµ‹è¯•ç”¨ä¾‹æœ‰é™ï¼ˆ5ä¸ªç¤ºä¾‹ï¼‰
- âš ï¸ è¯„ä¼°è§„åˆ™ç®€åŒ–

## ğŸ” æ•…éšœæ’é™¤

### Ollama è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥æœåŠ¡
curl http://localhost:11434/api/tags

# é‡å¯æœåŠ¡
brew services restart ollama
```

### Python æ¨¡å—é”™è¯¯

ç¡®ä¿åœ¨é¡¹ç›®ç›®å½•å¤–è¿è¡Œè„šæœ¬ï¼š

```bash
cd /Users/baozhen/CodeBuddy/medical-agent
python3 healthbench_test.py --model medical-assistant --examples 5
```

### å“åº”æ—¶é—´è¿‡é•¿

- æ£€æŸ¥ç³»ç»Ÿèµ„æºï¼ˆCPU/å†…å­˜ä½¿ç”¨ï¼‰
- è€ƒè™‘ä½¿ç”¨æ›´å°çš„æ¨¡å‹
- å‡å°‘æµ‹è¯•ç”¨ä¾‹æ•°é‡

## ğŸ“š ç›¸å…³èµ„æº

- [Ollama å®˜æ–¹æ–‡æ¡£](https://ollama.com/docs)
- [HealthBench å®˜æ–¹ä»‹ç»](https://openai.com/index/healthbench)
- [Simple-Evals GitHub](https://github.com/openai/simple-evals)
- [åŒ»ç–— Agent é¡¹ç›®](../medical-agent/)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸æ˜¯åŒ»ç–—å»ºè®®**: æµ‹è¯•ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—è¯„ä¼°
2. **å±€é™æ€§**: ç®€åŒ–ç‰ˆè¯„ä¼°å¯èƒ½æ— æ³•å®Œå…¨åæ˜ æ¨¡å‹çœŸå®èƒ½åŠ›
3. **æŒç»­æ”¹è¿›**: å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚æ‰©å±•æµ‹è¯•ç”¨ä¾‹å’Œè¯„ä¼°è§„åˆ™
4. **å®‰å…¨ç¬¬ä¸€**: ç´§æ€¥æƒ…å†µåº”ç«‹å³å¯»æ±‚ä¸“ä¸šåŒ»ç–—å¸®åŠ©

## ğŸ“ æœªæ¥æ”¹è¿›

- [ ] é›†æˆå®Œæ•´ HealthBench æ•°æ®é›†
- [ ] ä½¿ç”¨ GPT-4 ä½œä¸ºè¯„ä¼°å™¨
- [ ] æ”¯æŒæ‰¹é‡å¹¶è¡Œè¯„ä¼°
- [ ] æ·»åŠ æ›´å¤šæµ‹è¯•ç”¨ä¾‹ç±»åˆ«
- [ ] ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Šå›¾è¡¨
- [ ] æ”¯æŒå¤šæ¨¡å‹å¯¹æ¯”
